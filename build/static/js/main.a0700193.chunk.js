(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{111:function(e,t,n){e.exports=n(169)},116:function(e,t,n){},117:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),i=n.n(c),o=(n(116),n(117),n(172)),u=n(173),l=n(22),d=n(88),m=n(107),s=function(e){return function(t){return function(n){var a=n["Call API"];if("undefined"===typeof a)return t(n);var r=a.endpoint,c=a.types,i=function(e){var t=Object.assign({},n,e);return delete t["Call API"],t},o=Object(m.a)(c,3),u=o[0],l=o[1],d=o[2];return t(i({type:u})),function(e,t,n){var a="".concat("http://localhost:8000"+e);return fetch(a,{method:t.method,headers:{"Content-Type":"application/json"},body:t.body&&JSON.stringify(t.body)}).then((function(e){return t.cb&&t.cb(n.dispatch),e.json()})).catch((function(e){return t.callbackErr(e)}))}(r,a,e).then((function(e){return t(i({type:l.type,payload:e}))}),(function(e){return t(i({type:d,error:e.msg||"Something bad happened"}))}))}}},p=n(108),E=n(12),f={menus:[],cartList:[],addedItems:[],total:0};var b=Object(l.c)({MenuReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.itemId,c=t.menuId,i=t.cartId;switch(n){case"GET_MENUS_REQUEST":return Object(E.a)(Object(E.a)({},e),{},{menus:[]});case"GET_MENUS_SUCCESS":return Object(E.a)(Object(E.a)({},e),{},{menus:a});case"ADD_TO_CART":var o=r.split("_"),u=o[0],l=parseInt(o[1]);console.log("MenuId: "+c+" ItemId: "+l+" Name:"+u);var d=e.menus.find((function(e){return e.id===parseInt(c)})),m=d.items.find((function(e){return e.id===l}));m.menuId=parseInt(c),m.cartId=u+"_"+l+"_"+c;var s=e.addedItems.findIndex((function(e){return e.menuId===c&&e.id===l}));if(s>-1)return m.quantity+=1,Object(E.a)(Object(E.a)({},e),{},{total:e.total+m.price});m.quantity=1;var b=e.total+m.price;return Object(E.a)(Object(E.a)({},e),{},{addedItems:[].concat(Object(p.a)(e.addedItems),[m]),total:b});case"ADD_QUANTITY":var y=i,I=e.addedItems.find((function(e){return e.cartId===y}));I.quantity+=1;var v=e.total+I.price;return Object(E.a)(Object(E.a)({},e),{},{total:v});case"SUB_QUANTITY":var h=i,O=e.addedItems.find((function(e){return e.cartId===h}));if(1===O.quantity){var j=e.addedItems.filter((function(e){return e.cartId!==h})),g=e.total-O.price;return Object(E.a)(Object(E.a)({},e),{},{addedItems:j,total:g})}O.quantity-=1;var T=e.total-O.price;return Object(E.a)(Object(E.a)({},e),{},{total:T});default:return e}}});var y=n(47),I=n(59),v=n(60),h=n(70),O=n(69),j=n(58),g=function(e){return Object(j.a)({},"Call API",{params:e,endpoint:"/menu",method:"GET",types:["GET_MENUS_REQUEST",{type:"GET_MENUS_SUCCESS",payload:function(e,t,n){return n.json().then((function(e){return console.log(e),e}))}},"GET_MENUS_ERROR"]})},T=function(e,t){return{type:"ADD_TO_CART",itemId:e,menuId:t}},_=function(e){return{type:"SUB_QUANTITY",cartId:e}},C=function(e){return{type:"ADD_QUANTITY",cartId:e}},k=n(174),S=n(175),M=n(176),N=n(177);var w=function(e){return r.a.createElement(o.a,{style:{border:"2px solid primary",width:"100%"}},r.a.createElement(u.a,{span:16},r.a.createElement("p",null,e.name),r.a.createElement("p",{style:{color:"grey"}},e.details)),r.a.createElement(u.a,{span:4},e.likes?e.likes:"0"," ",r.a.createElement(M.a,{twoToneColor:"#eb2f96"})),r.a.createElement(u.a,{span:4},r.a.createElement(S.a,{danger:!0,type:"text",icon:r.a.createElement(N.a,null),onClick:function(){return t=e.itemId,console.log("Add to cart"),void e.onClickHandler(t,e.menuId);var t}},e.price," \u20b9")))};var U=function(e){var t=function(t,n){e.addToCart(t,n)},n=function(e){return r.a.createElement(w,{key:e.item.name+"_"+e.item.id,itemId:e.item.name+"_"+e.item.id,menuId:e.menu_id,name:e.item.name,details:e.item.description,price:e.item.price,likes:e.item.likes,onClickHandler:t})},a=function(e){return r.a.createElement("div",{key:e.menu.id,style:{width:"100%"}},r.a.createElement(k.b,{size:"large",header:r.a.createElement("div",null,e.menu.name),footer:r.a.createElement("div",null," --------------- "),bordered:!0,dataSource:e.menu.items,renderItem:function(t){return r.a.createElement(k.b.Item,null,r.a.createElement(n,{menu_id:e.menu.id,item:t}))}}))},c=function(e){return r.a.createElement(k.b,{size:"large",header:r.a.createElement("div",null,"Menus"),footer:r.a.createElement("div",null,"End Of Menu"),bordered:!0,dataSource:e.menus,renderItem:function(e){return r.a.createElement(k.b.Item,null,r.a.createElement(a,{menu:e}))}})};return r.a.createElement("div",null,e.menus?r.a.createElement(c,e):r.a.createElement("div",{label:"Loading Data..."}))},A=function(e){Object(h.a)(n,e);var t=Object(O.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getMenus)()}},{key:"render",value:function(){return r.a.createElement(U,this.props)}}]),n}(a.PureComponent),D=Object(y.b)((function(e){return e.MenuReducer}),(function(e){return Object(l.b)({getMenus:g,addToCart:T},e)}))(A),Q=n(178);n(168);var R=function(e){console.log(e);var t=function(t){console.log("You CartId: "+t),e.subtractQuantity(t)},n=function(t){console.log("You CartId: "+t),e.addQuantity(t)},a=function(e){return r.a.createElement(S.a,{primary:!0,type:"text",icon:r.a.createElement(N.a,null),onClick:function(){return n(e.cartId)}})},c=function(e){return r.a.createElement(S.a,{primary:!0,type:"text",icon:r.a.createElement(Q.a,null),onClick:function(){return t(e.cartId)}})},i=function(e){return r.a.createElement("div",{key:e.cartId,style:{width:"100%"}},r.a.createElement(o.a,null,r.a.createElement(u.a,{span:12},r.a.createElement("p",null,e.item.name),r.a.createElement("p",null,"Qty: ",e.item.quantity)),r.a.createElement(u.a,{span:8},e.item.quantity?r.a.createElement(o.a,null,r.a.createElement(u.a,{span:10},r.a.createElement(a,{cartId:e.item.cartId})),r.a.createElement(u.a,{span:10,offset:4},r.a.createElement(c,{cartId:e.item.cartId})," ")):""),r.a.createElement(u.a,{span:4},r.a.createElement(o.a,null,r.a.createElement(u.a,{span:24}," ",parseInt(e.item.price)*parseInt(e.item.quantity)," \u20b9 ")))))},l=function(e){return e.addedItems?e.addedItems.map((function(e){return r.a.createElement(i,{item:e})})):r.a.createElement("p",null," Nothing ")};return r.a.createElement(o.a,{className:"container"},r.a.createElement(u.a,{span:24},r.a.createElement("div",{className:"cart"},r.a.createElement("h3",null,"Your Order"),r.a.createElement("div",{className:"collection"},r.a.createElement(l,e)),r.a.createElement(o.a,{className:"total"},r.a.createElement(u.a,{span:8},"Total"),r.a.createElement(u.a,{span:8,offset:8},e.total," \u20b9")))))},x=function(e){Object(h.a)(n,e);var t=Object(O.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(R,this.props)}}]),n}(a.PureComponent),q=Object(y.b)((function(e){return e.MenuReducer}),(function(e){return Object(l.b)({addToCart:T,subtractQuantity:_,addQuantity:C},e)}))(x),Y=Object(l.d)(b,Object(l.a)(d.a,s));var G=function(){return r.a.createElement(y.a,{store:Y},r.a.createElement(o.a,{style:{border:"2px solid primary",padding:"0 10%",margin:"10%",width:"100%"}},r.a.createElement(u.a,{span:24},r.a.createElement(o.a,null,r.a.createElement(u.a,{span:16},r.a.createElement(D,null)),r.a.createElement(u.a,{span:6,style:{position:"fixed",right:"3%",top:"10px",width:"100%"}},r.a.createElement(q,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.a0700193.chunk.js.map